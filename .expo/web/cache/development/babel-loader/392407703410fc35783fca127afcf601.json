{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _reactNativeIndicators = require(\"react-native-indicators\");\n\nvar _reactNavigationStack = require(\"react-navigation-stack\");\n\nvar _nativeBase = require(\"native-base\");\n\nvar _WooComFetch = _interopRequireWildcard(require(\"../common/WooComFetch\"));\n\nvar _syncStorage = _interopRequireDefault(require(\"sync-storage\"));\n\nvar _reactNativeResponsiveScreen = require(\"react-native-responsive-screen\");\n\nvar _reactRedux = require(\"react-redux\");\n\nvar _Theme = _interopRequireDefault(require(\"../common/Theme.style\"));\n\nvar _jsxFileName = \"C:\\\\Users\\\\mysiew\\\\Documents\\\\eCommerce\\\\codecanyon-xPJMYS8x-react-native-delivery-solution-with-advance-website-and-cms\\\\SourceCode\\\\vesend-consumer-app-master\\\\src\\\\screens\\\\ShippingMethodScreen.js\";\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[typeof Symbol === \"function\" ? Symbol.iterator : \"@@iterator\"] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } it = o[typeof Symbol === \"function\" ? Symbol.iterator : \"@@iterator\"](); return it.next.bind(it); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar ShippingMethod = function (_Component) {\n  (0, _inherits2.default)(ShippingMethod, _Component);\n\n  var _super = _createSuper(ShippingMethod);\n\n  (0, _createClass2.default)(ShippingMethod, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getData();\n      this.props.navigation.setParams({\n        headerTitle: this.props.cartItems2.Config.languageJson2['Shipping Method']\n      });\n    }\n  }]);\n\n  function ShippingMethod(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, ShippingMethod);\n    _this = _super.call(this, props);\n\n    _this.getData = function _callee() {\n      var dat, data, orderDetails, m;\n      return _regenerator.default.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              dat = {};\n              dat.tax_zone_id = _syncStorage.default.get('orderDetails').tax_zone_id;\n              dat.state = _syncStorage.default.get('orderDetails').delivery_state;\n              dat.city = _syncStorage.default.get('orderDetails').delivery_city;\n              dat.country_id = _syncStorage.default.get('orderDetails').delivery_country_id;\n              dat.postcode = _syncStorage.default.get('orderDetails').delivery_postcode;\n              dat.zone = _syncStorage.default.get('orderDetails').delivery_zone;\n              dat.street_address = _syncStorage.default.get('orderDetails').delivery_street_address;\n              dat.products_weight = _this.calculateWeight();\n              dat.products_weight_unit = 'g';\n              dat.products = _this.getProducts();\n              dat.language_id = _syncStorage.default.get('langId') === undefined ? 1 : _syncStorage.default.get('langId');\n              dat.currency_code = _this.props.cartItems2.Config.productsArguments.currency;\n              _context.next = 15;\n              return _regenerator.default.awrap(_WooComFetch.default.postHttp((0, _WooComFetch.getUrl)() + '/api/' + 'getrate', dat));\n\n            case 15:\n              data = _context.sent;\n              orderDetails = _syncStorage.default.get('orderDetails');\n\n              if (data.data.success == 1) {\n                m = data.data.data.shippingMethods;\n                _this.state.shippingMethod = Object.keys(m).map(function (key) {\n                  return m[key];\n                });\n                orderDetails.total_tax = data.data.data.tax;\n\n                _syncStorage.default.set('orderDetails', orderDetails);\n              }\n\n              _this.setState({\n                isloading: false,\n                shippingMethod: _this.state.shippingMethod\n              });\n\n            case 19:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.calculateWeight = function () {\n      var pWeight = 0;\n      var totalWeight = 0;\n\n      for (var _iterator = _createForOfIteratorHelperLoose(_syncStorage.default.get('cartProducts')), _step; !(_step = _iterator()).done;) {\n        var value = _step.value;\n        pWeight = parseFloat(value.weight);\n\n        if (value.unit == 'kg') {\n          pWeight = parseFloat(value.weight) * 1000;\n        }\n\n        totalWeight = totalWeight + pWeight * value.customers_basket_quantity;\n      }\n\n      return totalWeight;\n    };\n\n    _this.state = {\n      tick: [],\n      isloading: true,\n      buttonEnable: true,\n      shippingMethod: [],\n      selectedMethod: true,\n      selectedvalue: '',\n      dat: {}\n    };\n    return _this;\n  }\n\n  (0, _createClass2.default)(ShippingMethod, [{\n    key: \"getProducts\",\n    value: function getProducts() {\n      var temp = [];\n\n      _syncStorage.default.get('cartProducts').forEach(function (element) {\n        temp.push({\n          customers_basket_quantity: element.customers_basket_quantity,\n          final_price: element.final_price,\n          price: element.price,\n          products_id: element.products_id,\n          total: element.total,\n          unit: element.unit,\n          weight: element.weight\n        });\n      });\n\n      return temp;\n    }\n  }, {\n    key: \"setMethod\",\n    value: function setMethod(data, index) {\n      var orderDetails = _syncStorage.default.get('orderDetails');\n\n      orderDetails.shipping_cost = data.rate;\n      orderDetails.shipping_method = data.name + '(' + data.shipping_method + ')';\n\n      _syncStorage.default.set('orderDetails', orderDetails);\n\n      this.state.tick = [];\n      this.state.tick[index] = true;\n      this.setState({\n        buttonEnable: false\n      });\n    }\n  }, {\n    key: \"proceedOrder\",\n    value: function proceedOrder() {\n      this.props.navigation.push('OrderScreen');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return this.state.isloading ? _react.default.createElement(_reactNative.View, {\n        style: {\n          flex: 1,\n          justifyContent: 'center',\n          backgroundColor: _Theme.default.backgroundColor\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 7\n        }\n      }, _react.default.createElement(_reactNativeIndicators.UIActivityIndicator, {\n        size: 27,\n        color: _Theme.default.loadingIndicatorColor,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 9\n        }\n      })) : _react.default.createElement(_nativeBase.Container, {\n        style: {\n          backgroundColor: _Theme.default.backgroundColor\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 7\n        }\n      }, _react.default.createElement(_reactNative.View, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 9\n        }\n      }, _react.default.createElement(_reactNative.FlatList, {\n        data: this.state.shippingMethod,\n        horizontal: false,\n        extraData: this.state,\n        keyExtractor: function keyExtractor(item, index) {\n          return index.toString();\n        },\n        renderItem: function renderItem(item) {\n          return _react.default.createElement(_reactNative.View, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 15\n            }\n          }, _react.default.createElement(_reactNative.View, {\n            style: {\n              justifyContent: 'center',\n              padding: 10,\n              paddingBottom: 14,\n              paddingTop: 14,\n              backgroundColor: _Theme.default.backgroundColor\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 17\n            }\n          }, item.item.services.length != 0 ? _react.default.createElement(_nativeBase.Text, {\n            style: {\n              color: _Theme.default.textColor\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 21\n            }\n          }, item.item.name) : null), item.item.services.map(function (v, i) {\n            return _react.default.createElement(_nativeBase.ListItem, {\n              style: {\n                backgroundColor: 'gray',\n                marginLeft: 0\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 19\n              }\n            }, _react.default.createElement(_reactNative.TouchableOpacity, {\n              style: {\n                flexDirection: 'row'\n              },\n              onPress: function onPress() {\n                return _this2.setMethod(v, item.index);\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 21\n              }\n            }, _react.default.createElement(_nativeBase.Body, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 23\n              }\n            }, _react.default.createElement(_reactNative.View, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 25\n              }\n            }, _react.default.createElement(_nativeBase.Text, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 27\n              }\n            }, v.name + ' ---- ' + v.rate + ' ' + v.currencyCode))), _react.default.createElement(_nativeBase.CheckBox, {\n              onPress: function onPress() {\n                return _this2.setMethod(v, item.index);\n              },\n              checked: _this2.state.tick[item.index],\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 23\n              }\n            })));\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }\n      })), _react.default.createElement(_reactNative.TouchableOpacity, {\n        onPress: function onPress() {\n          return _this2.proceedOrder();\n        },\n        disabled: this.state.buttonEnable,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 9\n        }\n      }, _react.default.createElement(_reactNative.View, {\n        style: {\n          borderColor: _Theme.default.otherBtnsColor,\n          alignItems: 'center',\n          height: 40,\n          width: (0, _reactNativeResponsiveScreen.widthPercentageToDP)('100%'),\n          backgroundColor: _Theme.default.otherBtnsColor,\n          justifyContent: 'center',\n          opacity: this.state.buttonEnable ? 0.4 : 0.9\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }\n      }, _react.default.createElement(_nativeBase.Text, {\n        style: {\n          textAlign: 'center',\n          color: _Theme.default.otherBtnsText,\n          fontSize: _Theme.default.mediumSize,\n          fontWeight: '500'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 13\n        }\n      }, this.props.cartItems2.Config.languageJson2.Next))));\n    }\n  }]);\n  return ShippingMethod;\n}(_react.Component);\n\nShippingMethod.navigationOptions = function (_ref) {\n  var navigation = _ref.navigation;\n  var headerStyle = navigation.getParam('headerTitle');\n  return {\n    headerTitle: headerStyle,\n    cardStyleInterpolator: _reactNavigationStack.CardStyleInterpolators.forHorizontalIOS,\n    headerTitleAlign: 'center',\n    headerTintColor: _Theme.default.headerTintColor,\n    headerStyle: {\n      backgroundColor: _Theme.default.primary\n    },\n    headerTitleStyle: {\n      fontWeight: _reactNative.Platform.OS === 'android' ? 'bold' : 'normal'\n    },\n    headerForceInset: {\n      top: 'never',\n      vertical: 'never'\n    },\n    gestureEnabled: true\n  };\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    cartItems2: state\n  };\n};\n\nvar _default = (0, _reactRedux.connect)(mapStateToProps, null)(ShippingMethod);\n\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/mysiew/Documents/eCommerce/codecanyon-xPJMYS8x-react-native-delivery-solution-with-advance-website-and-cms/SourceCode/vesend-consumer-app-master/src/screens/ShippingMethodScreen.js"],"names":["ShippingMethod","getData","props","navigation","setParams","headerTitle","cartItems2","Config","languageJson2","dat","tax_zone_id","SyncStorage","get","state","delivery_state","city","delivery_city","country_id","delivery_country_id","postcode","delivery_postcode","zone","delivery_zone","street_address","delivery_street_address","products_weight","calculateWeight","products_weight_unit","products","getProducts","language_id","undefined","currency_code","productsArguments","currency","WooComFetch","postHttp","data","orderDetails","success","m","shippingMethods","shippingMethod","Object","keys","map","key","total_tax","tax","set","setState","isloading","pWeight","totalWeight","value","parseFloat","weight","unit","customers_basket_quantity","tick","buttonEnable","selectedMethod","selectedvalue","temp","forEach","element","push","final_price","price","products_id","total","index","shipping_cost","rate","shipping_method","name","flex","justifyContent","backgroundColor","themeStyle","loadingIndicatorColor","item","toString","padding","paddingBottom","paddingTop","services","length","color","textColor","v","i","marginLeft","flexDirection","setMethod","currencyCode","proceedOrder","borderColor","otherBtnsColor","alignItems","height","width","opacity","textAlign","otherBtnsText","fontSize","mediumSize","fontWeight","Next","Component","navigationOptions","headerStyle","getParam","cardStyleInterpolator","CardStyleInterpolators","forHorizontalIOS","headerTitleAlign","headerTintColor","primary","headerTitleStyle","Platform","OS","headerForceInset","top","vertical","gestureEnabled","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { View, FlatList, TouchableOpacity, Platform } from 'react-native'\nimport { UIActivityIndicator } from 'react-native-indicators'\nimport { CardStyleInterpolators } from 'react-navigation-stack'\nimport { Container, Content, ListItem, CheckBox, Text, Body } from 'native-base'\nimport WooComFetch, { getUrl } from '../common/WooComFetch'\nimport SyncStorage from 'sync-storage'\nimport { widthPercentageToDP as wp } from 'react-native-responsive-screen'\nimport { connect } from 'react-redux'\nimport themeStyle from '../common/Theme.style'\nclass ShippingMethod extends Component {\n  static navigationOptions = ({ navigation }) => {\n    const headerStyle = navigation.getParam('headerTitle')\n    return {\n      headerTitle: headerStyle,\n      cardStyleInterpolator: CardStyleInterpolators.forHorizontalIOS,\n      headerTitleAlign: 'center',\n      headerTintColor: themeStyle.headerTintColor,\n      headerStyle: {\n        backgroundColor: themeStyle.primary\n      },\n      headerTitleStyle: {\n        fontWeight: Platform.OS === 'android' ? 'bold' : 'normal'\n      },\n      headerForceInset: { top: 'never', vertical: 'never' },\n      gestureEnabled: true\n    }\n  }\n\n  componentDidMount () {\n    this.getData()\n    this.props.navigation.setParams({\n      headerTitle: this.props.cartItems2.Config.languageJson2['Shipping Method']\n    })\n  }\n\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      tick: [],\n      isloading: true,\n      buttonEnable: true,\n      shippingMethod: [],\n      selectedMethod: true,\n      selectedvalue: '',\n      dat: {}\n    }\n  }\n\n  getData = async () => {\n    const dat = {}\n    dat.tax_zone_id = SyncStorage.get('orderDetails').tax_zone_id\n    dat.state = SyncStorage.get('orderDetails').delivery_state\n    dat.city = SyncStorage.get('orderDetails').delivery_city\n    dat.country_id = SyncStorage.get('orderDetails').delivery_country_id\n    dat.postcode = SyncStorage.get('orderDetails').delivery_postcode\n    dat.zone = SyncStorage.get('orderDetails').delivery_zone\n    dat.street_address = SyncStorage.get('orderDetails').delivery_street_address\n    dat.products_weight = this.calculateWeight()\n    dat.products_weight_unit = 'g'\n    dat.products = this.getProducts()\n    dat.language_id =\n      SyncStorage.get('langId') === undefined ? 1 : SyncStorage.get('langId')\n    dat.currency_code = this.props.cartItems2.Config.productsArguments.currency\n    const data = await WooComFetch.postHttp(getUrl() + '/api/' + 'getrate', dat)\n    const orderDetails = SyncStorage.get('orderDetails')\n    if (data.data.success == 1) {\n      var m = data.data.data.shippingMethods\n      this.state.shippingMethod = Object.keys(m).map(function (key) {\n        return m[key]\n      })\n      orderDetails.total_tax = data.data.data.tax\n      SyncStorage.set('orderDetails', orderDetails)\n    }\n    this.setState({ isloading: false, shippingMethod: this.state.shippingMethod })\n  } /// ///////////////////////////////////////////////////////////////////////////////////////////////\n\n  //= ================================================================================================================================\n  // calcualting products total weight\n  calculateWeight = function () {\n    var pWeight = 0\n    var totalWeight = 0\n    for (const value of SyncStorage.get('cartProducts')) {\n      pWeight = parseFloat(value.weight)\n      if (value.unit == 'kg') {\n        pWeight = parseFloat(value.weight) * 1000\n      }\n      totalWeight = totalWeight + pWeight * value.customers_basket_quantity\n    }\n    return totalWeight\n  }\n\n  getProducts () {\n    const temp = []\n    SyncStorage.get('cartProducts').forEach(element => {\n      temp.push({\n        customers_basket_quantity: element.customers_basket_quantity,\n        final_price: element.final_price,\n        price: element.price,\n        products_id: element.products_id,\n        total: element.total,\n        unit: element.unit,\n        weight: element.weight\n      })\n    })\n    return temp\n  }\n\n  // //= ================================================================================================================================\n  setMethod (data, index) {\n    const orderDetails = SyncStorage.get('orderDetails')\n    orderDetails.shipping_cost = data.rate\n    orderDetails.shipping_method = data.name + '(' + data.shipping_method + ')'\n    SyncStorage.set('orderDetails', orderDetails)\n    this.state.tick = []\n    this.state.tick[index] = true\n    this.setState({ buttonEnable: false })\n  }\n\n  proceedOrder () {\n    this.props.navigation.push('OrderScreen')\n  }\n\n  /// //////////////////////////////////////////////////////////////////////////////////////////////////\n\n  render () {\n    return this.state.isloading ? (\n      <View style={{\n        flex: 1,\n        justifyContent: 'center',\n        backgroundColor: themeStyle.backgroundColor\n      }}>\n        <UIActivityIndicator\n          size={27}\n          color={themeStyle.loadingIndicatorColor}\n        />\n      </View>\n    ) : (\n      <Container style={{\n        backgroundColor: themeStyle.backgroundColor\n      }}>\n        <View style={{flex: 1}}>\n          <FlatList\n            data={this.state.shippingMethod}\n            horizontal={false}\n            extraData={this.state}\n            keyExtractor={(item, index) => index.toString()}\n            renderItem={item => (\n              <View>\n                <View\n                  style={{\n                    justifyContent: 'center',\n                    padding: 10,\n                    paddingBottom: 14,\n                    paddingTop: 14,\n                    backgroundColor: themeStyle.backgroundColor\n                  }}>\n                  {item.item.services.length != 0 ? (\n                    <Text style={{ color: themeStyle.textColor }}>{item.item.name}</Text>\n                  ) : null}\n                </View>\n\n                {item.item.services.map((v, i) => (\n                  <ListItem style={{ backgroundColor: 'gray', marginLeft: 0 }}>\n                    <TouchableOpacity\n                      style={{\n                        flexDirection: 'row'\n                      }}\n                      onPress={() => this.setMethod(v, item.index)}>\n                      <Body>\n                        <View>\n                          <Text>\n                            {v.name + ' ---- ' + v.rate + ' ' + v.currencyCode}\n                          </Text>\n                        </View>\n                      </Body>\n                      <CheckBox\n                        onPress={() => this.setMethod(v, item.index)}\n                        checked={this.state.tick[item.index]}\n                      />\n                    </TouchableOpacity>\n                  </ListItem>\n                ))}\n              </View>\n            )}\n          />\n        </View>\n\n        <TouchableOpacity\n          onPress={() => this.proceedOrder()}\n          disabled={this.state.buttonEnable}>\n          <View\n            style={{\n              borderColor: themeStyle.otherBtnsColor,\n              alignItems: 'center',\n              height: 40,\n              width: wp('100%'),\n              backgroundColor: themeStyle.otherBtnsColor,\n              justifyContent: 'center',\n              opacity: this.state.buttonEnable ? 0.4 : 0.9\n            }}>\n            <Text\n              style={{\n                textAlign: 'center',\n                color: themeStyle.otherBtnsText,\n                fontSize: themeStyle.mediumSize,\n                fontWeight: '500'\n              }}>\n              {this.props.cartItems2.Config.languageJson2.Next}\n            </Text>\n          </View>\n        </TouchableOpacity>\n      </Container>\n    )\n  }\n}\nconst mapStateToProps = state => ({\n  cartItems2: state\n})\n\nexport default connect(mapStateToProps, null)(ShippingMethod)"]},"metadata":{},"sourceType":"script"}