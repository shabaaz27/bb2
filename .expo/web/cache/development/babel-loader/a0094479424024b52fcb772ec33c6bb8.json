{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _MatrixMath = _interopRequireDefault(require(\"react-native/Libraries/Utilities/MatrixMath\"));\n\nvar _Styles = _interopRequireDefault(require(\"./Styles\"));\n\nvar _jsxFileName = \"C:\\\\Users\\\\mysiew\\\\Documents\\\\eCommerce\\\\codecanyon-xPJMYS8x-react-native-delivery-solution-with-advance-website-and-cms\\\\SourceCode\\\\vesend-consumer-app-master\\\\node_modules\\\\react-native-underline-tabbar\\\\lib\\\\TabBar.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction transformOrigin(matrix, origin) {\n  var x = origin.x,\n      y = origin.y,\n      z = origin.z;\n\n  var translate = _MatrixMath.default.createIdentityMatrix();\n\n  _MatrixMath.default.reuseTranslate3dCommand(translate, x, y, z);\n\n  _MatrixMath.default.multiplyInto(matrix, translate, matrix);\n\n  var untranslate = _MatrixMath.default.createIdentityMatrix();\n\n  _MatrixMath.default.reuseTranslate3dCommand(untranslate, -x, -y, -z);\n\n  _MatrixMath.default.multiplyInto(matrix, matrix, untranslate);\n}\n\nfunction createTranslateXScaleX(scaleXFactor, x) {\n  return [scaleXFactor, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, x, 0, 0, 1];\n}\n\nvar TabBar = function (_Component) {\n  (0, _inherits2.default)(TabBar, _Component);\n\n  var _super = _createSuper(TabBar);\n\n  function TabBar() {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, TabBar);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.initialSetupWasDone = false;\n    _this.currentContentOffset = {\n      x: 0,\n      y: 0\n    };\n    _this.tabState = {};\n    _this.tabContainerLayout = {\n      width: 0,\n      height: 0,\n      x: 0,\n      y: 0\n    };\n    _this.scrollContainerLayout = {\n      width: 0,\n      height: 0,\n      x: 0,\n      y: 0\n    };\n    _this.underlineRef = null;\n    _this.scrollView = null;\n    _this._animateListenerId = null;\n    _this.offsetCollection = null;\n    _this.widthCollection = null;\n    _this.scrollOffsetsCollection = null;\n    _this.state = {\n      renderUnderline: false,\n      tabScrollValue: 0\n    };\n\n    _this.measureTabsContainer = function (event) {\n      _this.tabContainerLayout = event.nativeEvent.layout;\n\n      _this.checkMeasures();\n    };\n\n    _this.onScrollContentSizeChange = function (width, height) {\n      _this.scrollContainerLayout = {\n        width: width,\n        height: height,\n        x: 0,\n        y: 0\n      };\n\n      _this.checkMeasures();\n    };\n\n    _this.setUnderlineRef = function (ref) {\n      _this.underlineRef = ref;\n    };\n\n    _this.handleScrolling = function (event) {\n      var value = event.value;\n      var dx = _this.offsetCollection && _this.offsetCollection._interpolation(value) || 0;\n      var scaleX = _this.widthCollection && _this.widthCollection._interpolation(value) || 0;\n\n      _this.applyTransformToUnderline(scaleX, dx);\n\n      if (_this.scrollOffsetsCollection) {\n        var scrollOffset = _this.scrollOffsetsCollection && _this.scrollOffsetsCollection._interpolation(value);\n\n        if (_this.scrollView) {\n          _this.scrollView.scrollTo({\n            x: scrollOffset,\n            animated: false\n          });\n        }\n      }\n    };\n\n    _this.checkMeasures = function () {\n      if (_this.state.renderUnderline && _this.tabContainerLayout.width !== 0 && _this.scrollContainerLayout.width !== 0) {\n        _this.calculateInterpolations();\n\n        if (!_this.initialSetupWasDone) {\n          var activeTab = _this.props.activeTab;\n\n          _this.handleScrolling({\n            value: activeTab\n          });\n\n          _this.initialSetupWasDone = true;\n        }\n      }\n    };\n\n    _this.calculateInterpolations = function () {\n      var inputRange = Object.keys(_this.tabState).map(Number);\n      var outputRangeLeft = [];\n      var outputRangeWidth = [];\n      var tabContainerWidth = _this.tabContainerLayout.width;\n      var scrollWidth = _this.scrollContainerLayout.width;\n      var marginValue = _this.props.tabMargin;\n\n      for (var i = 0, len = inputRange.length; i < len; i += 1) {\n        var key = inputRange[i];\n        outputRangeLeft.push(_this.tabState[key].x);\n        outputRangeWidth.push(_this.tabState[key].width);\n      }\n\n      if (inputRange.length < 2) {\n        inputRange.push(1);\n        outputRangeLeft.push(0);\n        outputRangeWidth.push(0);\n      }\n\n      _this.offsetCollection = _this.props.scrollValue.interpolate({\n        inputRange: inputRange,\n        outputRange: outputRangeLeft\n      });\n      _this.widthCollection = _this.props.scrollValue.interpolate({\n        inputRange: inputRange,\n        outputRange: outputRangeWidth\n      });\n      var outputRangeScroll = [0];\n\n      for (var _i = 1, _len2 = inputRange.length; _i < _len2; _i += 1) {\n        var isLast = _i === _len2 - 1;\n        var offset = outputRangeLeft[_i];\n        var tabWidth = outputRangeWidth[_i];\n        var nextTabWidth = outputRangeWidth[_i + 1] || 0;\n        var scrollOffset = offset;\n\n        if (offset + tabWidth + nextTabWidth + 2 * marginValue >= scrollWidth) {\n          if (isLast) {\n            scrollOffset = offset - (tabContainerWidth - (tabWidth + marginValue));\n          } else {\n            scrollOffset = offset - (tabContainerWidth - (tabWidth + nextTabWidth + 1.3 * marginValue));\n          }\n        } else {\n          scrollOffset = offset - (tabContainerWidth - (tabWidth + marginValue) + (nextTabWidth + 2 * marginValue)) / 2;\n          scrollOffset = scrollOffset >= 0 ? scrollOffset : 0;\n        }\n\n        outputRangeScroll.push(scrollOffset);\n      }\n\n      if (scrollWidth <= tabContainerWidth) {\n        _this.scrollOffsetsCollection = _this.props.scrollValue.interpolate({\n          inputRange: [-1, 0],\n          outputRange: [-40, 0],\n          extrapolate: 'clamp'\n        });\n        return;\n      }\n\n      _this.scrollOffsetsCollection = _this.props.scrollValue.interpolate({\n        inputRange: [-1].concat((0, _toConsumableArray2.default)(inputRange)),\n        outputRange: [-40].concat(outputRangeScroll)\n      });\n    };\n\n    _this.onTabBarScrolling = function (e) {\n      _this.currentContentOffset = e.nativeEvent.contentOffset;\n    };\n\n    _this.renderTab = function (tab, page, isTabActive, onPressHandler, onTabLayout) {\n      var _this$props = _this.props,\n          tabBadgeColor = _this$props.tabBadgeColor,\n          activeTabTextStyle = _this$props.activeTabTextStyle;\n      var label = tab.label,\n          badge = tab.badge,\n          badgeColor = tab.badgeColor;\n      var activeTextColor = _this.props.activeTextColor || 'navy';\n      var inactiveTextColor = _this.props.inactiveTextColor || 'black';\n      var textStyle = _this.props.tabBarTextStyle;\n      return _react.default.createElement(_reactNative.TouchableOpacity, {\n        style: [_Styles.default.tab, _this.props.tabMargin && {\n          marginLeft: _this.props.tabMargin\n        }, _this.props.tabStyles.tab],\n        key: page,\n        onPress: onPressHandler,\n        onLayout: onTabLayout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 7\n        }\n      }, _react.default.createElement(_reactNative.Text, {\n        style: [{\n          color: isTabActive ? activeTextColor : inactiveTextColor\n        }, textStyle, isTabActive && activeTabTextStyle],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 9\n        }\n      }, label), badge != null && parseInt(badge, 10) > 0 && _react.default.createElement(_reactNative.View, {\n        style: [_Styles.default.badgeBubble, _this.props.tabStyles.badgeBubble, {\n          backgroundColor: badgeColor || tabBadgeColor || activeTextColor\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 11\n        }\n      }, _react.default.createElement(_reactNative.Text, {\n        style: [_Styles.default.badgeText, _this.props.tabStyles.badgeText],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 13\n        }\n      }, badge)));\n    };\n\n    return _this;\n  }\n\n  (0, _createClass2.default)(TabBar, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._animateListenerId = this.props.scrollValue.addListener(this.handleScrolling);\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      var serializedState = JSON.stringify(this.props) + JSON.stringify(this.state);\n      var serializedNextState = JSON.stringify(nextProps) + JSON.stringify(nextState);\n      return serializedState !== serializedNextState;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this._animateListenerId) {\n        this.props.scrollValue.removeListener(this._animateListenerId);\n      }\n    }\n  }, {\n    key: \"applyTransformToUnderline\",\n    value: function applyTransformToUnderline(scaleXFactor, dx) {\n      var underlineRef = this.underlineRef;\n      if (!underlineRef) return;\n      var matrix = createTranslateXScaleX(scaleXFactor, dx);\n      transformOrigin(matrix, {\n        x: -0.5,\n        y: 0,\n        z: 0\n      });\n      underlineRef.setNativeProps({\n        style: {\n          transform: [{\n            matrix: matrix\n          }]\n        }\n      });\n    }\n  }, {\n    key: \"onTabLayout\",\n    value: function onTabLayout(event, page) {\n      var _this2 = this;\n\n      var _event$nativeEvent$la = event.nativeEvent.layout,\n          x = _event$nativeEvent$la.x,\n          y = _event$nativeEvent$la.y,\n          width = _event$nativeEvent$la.width,\n          height = _event$nativeEvent$la.height;\n      this.tabState[page] = {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      };\n\n      if (this.state.renderUnderline) {\n        this.calculateInterpolations();\n        this.setState({\n          renderUnderline: false\n        }, function () {\n          _this2.setState({\n            renderUnderline: true\n          }, function () {\n            _this2.handleScrolling({\n              value: _this2.props.scrollValue.__getValue()\n            });\n          });\n        });\n        return;\n      }\n\n      if (this.props.tabs.length === Object.keys(this.tabState).length) {\n        this.setState({\n          renderUnderline: true\n        }, this.checkMeasures);\n      }\n    }\n  }, {\n    key: \"renderUnderline\",\n    value: function renderUnderline() {\n      var tabUnderlineStyle = {\n        position: 'absolute',\n        backgroundColor: this.props.underlineColor,\n        height: this.props.underlineHeight,\n        width: 1,\n        bottom: this.props.underlineBottomPosition,\n        padding: 0\n      };\n      return _react.default.createElement(_reactNative.Animated.View, {\n        ref: this.setUnderlineRef,\n        style: [tabUnderlineStyle],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 12\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props2 = this.props,\n          style = _this$props2.style,\n          backgroundColor = _this$props2.backgroundColor,\n          tabBarStyle = _this$props2.tabBarStyle,\n          tabMargin = _this$props2.tabMargin,\n          scrollContainerStyle = _this$props2.scrollContainerStyle,\n          tabs = _this$props2.tabs;\n      return _react.default.createElement(_reactNative.View, {\n        style: [_Styles.default.tabs, {\n          backgroundColor: backgroundColor\n        }, style, tabBarStyle],\n        onLayout: this.measureTabsContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 7\n        }\n      }, _react.default.createElement(_reactNative.ScrollView, {\n        horizontal: true,\n        contentContainerStyle: [_Styles.default.scrollContainer, tabMargin && {\n          paddingRight: tabMargin\n        }, scrollContainerStyle],\n        showsHorizontalScrollIndicator: false,\n        onContentSizeChange: this.onScrollContentSizeChange,\n        ref: function ref(node) {\n          return _this3.scrollView = node;\n        },\n        bounces: false,\n        scrollEventThrottle: 1,\n        onScroll: this.onTabBarScrolling,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 9\n        }\n      }, tabs.map(function (tab, page) {\n        var renderTab = _this3.props.renderTab || _this3.renderTab;\n        var isTabActive = _this3.props.activeTab === page;\n\n        var onPressHandler = function onPressHandler() {\n          return _this3.props.goToPage(page);\n        };\n\n        var onTabLayout = function onTabLayout(event) {\n          return _this3.onTabLayout(event, page);\n        };\n\n        return renderTab(tab, page, isTabActive, onPressHandler, onTabLayout);\n      }), this.state.renderUnderline && this.renderUnderline()));\n    }\n  }]);\n  return TabBar;\n}(_react.Component);\n\nTabBar.defaultProps = {\n  tabMargin: 20,\n  tabBarTextStyle: {},\n  tabStyles: {\n    tab: {},\n    badgeBubble: {},\n    badgeText: {}\n  },\n  scrollContainerStyle: {},\n  style: {},\n  underlineColor: 'navy',\n  underlineHeight: 2,\n  underlineBottomPosition: 0\n};\nvar _default = TabBar;\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/mysiew/Documents/eCommerce/codecanyon-xPJMYS8x-react-native-delivery-solution-with-advance-website-and-cms/SourceCode/vesend-consumer-app-master/node_modules/react-native-underline-tabbar/lib/TabBar.js"],"names":["transformOrigin","matrix","origin","x","y","z","translate","MatrixMath","createIdentityMatrix","reuseTranslate3dCommand","multiplyInto","untranslate","createTranslateXScaleX","scaleXFactor","TabBar","initialSetupWasDone","currentContentOffset","tabState","tabContainerLayout","width","height","scrollContainerLayout","underlineRef","scrollView","_animateListenerId","offsetCollection","widthCollection","scrollOffsetsCollection","state","renderUnderline","tabScrollValue","measureTabsContainer","event","nativeEvent","layout","checkMeasures","onScrollContentSizeChange","setUnderlineRef","ref","handleScrolling","value","dx","_interpolation","scaleX","applyTransformToUnderline","scrollOffset","scrollTo","animated","calculateInterpolations","activeTab","props","inputRange","Object","keys","map","Number","outputRangeLeft","outputRangeWidth","tabContainerWidth","scrollWidth","marginValue","tabMargin","i","len","length","key","push","scrollValue","interpolate","outputRange","outputRangeScroll","isLast","offset","tabWidth","nextTabWidth","extrapolate","onTabBarScrolling","e","contentOffset","renderTab","tab","page","isTabActive","onPressHandler","onTabLayout","tabBadgeColor","activeTabTextStyle","label","badge","badgeColor","activeTextColor","inactiveTextColor","textStyle","tabBarTextStyle","styles","marginLeft","tabStyles","color","parseInt","badgeBubble","backgroundColor","badgeText","addListener","nextProps","nextState","serializedState","JSON","stringify","serializedNextState","removeListener","setNativeProps","style","transform","setState","__getValue","tabs","tabUnderlineStyle","position","underlineColor","underlineHeight","bottom","underlineBottomPosition","padding","tabBarStyle","scrollContainerStyle","scrollContainer","paddingRight","node","goToPage","Component","defaultProps"],"mappings":"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","sourcesContent":["/**\n * Created by Konstantin Yakushin.\n * react-native-underline-tabbar\n */\n// @flow\nimport React, { Component } from 'react';\nimport { Text, TouchableOpacity, View, Animated, ScrollView } from 'react-native';\nimport MatrixMath from 'react-native/Libraries/Utilities/MatrixMath';\n\nimport styles from './Styles';\n\nfunction transformOrigin(matrix, origin) {\n  const { x, y, z } = origin;\n\n  const translate = MatrixMath.createIdentityMatrix();\n  MatrixMath.reuseTranslate3dCommand(translate, x, y, z);\n  MatrixMath.multiplyInto(matrix, translate, matrix);\n\n  const untranslate = MatrixMath.createIdentityMatrix();\n  MatrixMath.reuseTranslate3dCommand(untranslate, -x, -y, -z);\n  MatrixMath.multiplyInto(matrix, matrix, untranslate);\n}\n\nfunction createTranslateXScaleX(scaleXFactor, x) {\n  // prettier-ignore\n  return [\n    scaleXFactor, 0, 0, 0,\n    0, 1, 0, 0,\n    0, 0, 1, 0,\n    x, 0, 0, 1,\n  ];\n}\n\nexport type TabType = {\n  label: string,\n  badge: string,\n  badgeColor?: string,\n  [string]: any,\n};\n\nexport type Props = {\n  goToPage: Function,\n  activeTab: number,\n  tabs: TabType[],\n  underlineColor: string,\n  underlineHeight: number,\n  underlineBottomPosition: number,\n  backgroundColor: string,\n  activeTextColor: string,\n  inactiveTextColor: string,\n  tabBadgeColor: string,\n  scrollValue: Animated.Value,\n  scrollContainerStyle: Object,\n  tabStyles: {\n    tab?: Object,\n    badgeBubble?: Object,\n    badgeText?: Object,\n  },\n  tabMargin: number,\n  style: Object,\n  activeTabTextStyle: Object,\n  tabBarTextStyle: Object,\n  tabBarStyle: Object,\n  renderTab: (\n    tab: TabType,\n    page: number,\n    isTabActive: boolean,\n    onPressHandler: Function,\n    onTabLayout: Function,\n  ) => any,\n};\n\ntype State = {\n  renderUnderline: boolean,\n  tabScrollValue: number,\n};\n\ntype LayoutType = {\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n};\n\ntype TabStateType = {\n  [string | number]: LayoutType,\n};\n\nclass TabBar extends Component<Props, State> {\n  static defaultProps = {\n    tabMargin: 20,\n    tabBarTextStyle: {},\n    tabStyles: {\n      tab: {},\n      badgeBubble: {},\n      badgeText: {},\n    },\n    scrollContainerStyle: {},\n    style: {},\n    underlineColor: 'navy',\n    underlineHeight: 2,\n    underlineBottomPosition: 0,\n  };\n  initialSetupWasDone: boolean = false;\n  currentContentOffset: { y: number, x: number } = { x: 0, y: 0 };\n  tabState: TabStateType = {};\n  tabContainerLayout: LayoutType = {\n    width: 0,\n    height: 0,\n    x: 0,\n    y: 0,\n  };\n  scrollContainerLayout: LayoutType = {\n    width: 0,\n    height: 0,\n    x: 0,\n    y: 0,\n  };\n  underlineRef: ?any = null;\n  scrollView: ?any = null;\n  _animateListenerId: ?string = null;\n  offsetCollection: ?Object = null;\n  widthCollection: ?Object = null;\n  scrollOffsetsCollection: ?Object = null;\n  state = {\n    renderUnderline: false,\n    tabScrollValue: 0,\n  };\n\n  componentDidMount() {\n    this._animateListenerId = this.props.scrollValue.addListener(this.handleScrolling);\n  }\n\n  shouldComponentUpdate(nextProps: Props, nextState: State) {\n    const serializedState = JSON.stringify(this.props) + JSON.stringify(this.state);\n    const serializedNextState = JSON.stringify(nextProps) + JSON.stringify(nextState);\n    return serializedState !== serializedNextState;\n  }\n\n  componentWillUnmount() {\n    if (this._animateListenerId) {\n      this.props.scrollValue.removeListener(this._animateListenerId);\n    }\n  }\n\n  measureTabsContainer = (event: Object) => {\n    this.tabContainerLayout = event.nativeEvent.layout;\n    this.checkMeasures();\n  };\n\n  onScrollContentSizeChange = (width: number, height: number) => {\n    this.scrollContainerLayout = { width, height, x: 0, y: 0 };\n    this.checkMeasures();\n  };\n\n  setUnderlineRef = (ref: any) => {\n    this.underlineRef = ref;\n  };\n\n  handleScrolling = (event: { value: number }) => {\n    const { value } = event;\n    const dx = (this.offsetCollection && this.offsetCollection._interpolation(value)) || 0;\n    const scaleX = (this.widthCollection && this.widthCollection._interpolation(value)) || 0;\n    this.applyTransformToUnderline(scaleX, dx);\n    if (this.scrollOffsetsCollection) {\n      const scrollOffset =\n        this.scrollOffsetsCollection && this.scrollOffsetsCollection._interpolation(value);\n      if (this.scrollView) {\n        this.scrollView.scrollTo({ x: scrollOffset, animated: false });\n      }\n    }\n  };\n\n  applyTransformToUnderline(scaleXFactor: number, dx: number) {\n    const { underlineRef } = this;\n    if (!underlineRef) return;\n    const matrix = createTranslateXScaleX(scaleXFactor, dx);\n    transformOrigin(matrix, { x: -0.5, y: 0, z: 0 });\n    underlineRef.setNativeProps({\n      style: {\n        transform: [\n          {\n            matrix,\n          },\n        ],\n      },\n    });\n  }\n\n  onTabLayout(event: Object, page: number) {\n    const { x, y, width, height } = event.nativeEvent.layout;\n    this.tabState[page] = { x, y, width, height };\n    if (this.state.renderUnderline) {\n      this.calculateInterpolations();\n      // The next lines may look awful and it will be true\n      // But they are needed to update underline without glitches\n      // FIXME: Find another way to rerender update underline without glitches\n      this.setState({ renderUnderline: false }, () => {\n        this.setState({ renderUnderline: true }, () => {\n          this.handleScrolling({ value: this.props.scrollValue.__getValue() });\n        });\n      });\n      return;\n    }\n    if (this.props.tabs.length === Object.keys(this.tabState).length) {\n      this.setState({ renderUnderline: true }, this.checkMeasures);\n    }\n  }\n\n  checkMeasures = () => {\n    if (\n      this.state.renderUnderline &&\n      this.tabContainerLayout.width !== 0 &&\n      this.scrollContainerLayout.width !== 0\n    ) {\n      this.calculateInterpolations();\n      if (!this.initialSetupWasDone) {\n        const { activeTab } = this.props;\n        this.handleScrolling({ value: activeTab });\n        this.initialSetupWasDone = true;\n      }\n    }\n  };\n\n  calculateInterpolations = () => {\n    const inputRange = Object.keys(this.tabState).map(Number);\n    const outputRangeLeft = [];\n    const outputRangeWidth = [];\n    const tabContainerWidth = this.tabContainerLayout.width;\n    const scrollWidth = this.scrollContainerLayout.width;\n    const marginValue = this.props.tabMargin;\n    for (let i = 0, len = inputRange.length; i < len; i += 1) {\n      const key = inputRange[i];\n      outputRangeLeft.push(this.tabState[key].x);\n      outputRangeWidth.push(this.tabState[key].width);\n    }\n    // Serve the case when we have only one tab\n    // Also it doesn't make sense to handle case when we don't have tabs at all\n    // because ScrollableTabView wouldn't work\n    if (inputRange.length < 2) {\n      inputRange.push(1);\n      outputRangeLeft.push(0);\n      outputRangeWidth.push(0);\n    }\n    // $FlowFixMe\n    this.offsetCollection = this.props.scrollValue.interpolate({\n      inputRange, // $FlowFixMe\n      outputRange: outputRangeLeft, // $FlowFixMe\n    });\n    // $FlowFixMe\n    this.widthCollection = this.props.scrollValue.interpolate({\n      inputRange, // $FlowFixMe\n      outputRange: outputRangeWidth, // $FlowFixMe\n    });\n    const outputRangeScroll = [0];\n    for (let i = 1, len = inputRange.length; i < len; i += 1) {\n      const isLast = i === len - 1;\n      const offset = outputRangeLeft[i];\n      const tabWidth = outputRangeWidth[i];\n      const nextTabWidth = outputRangeWidth[i + 1] || 0;\n      let scrollOffset = offset;\n\n      if (offset + tabWidth + nextTabWidth + 2 * marginValue >= scrollWidth) {\n        if (isLast) {\n          scrollOffset = offset - (tabContainerWidth - (tabWidth + marginValue));\n        } else {\n          // 1.3 - is a magical constant\n          // actually it is just 1.3 of margins. If to place 2\n          // scrollOffset will match with last tab's offset\n          // And it will prevent bounce effect while scrolling\n          scrollOffset =\n            offset - (tabContainerWidth - (tabWidth + nextTabWidth + 1.3 * marginValue));\n        }\n      } else {\n        scrollOffset =\n          offset -\n          (tabContainerWidth - (tabWidth + marginValue) + (nextTabWidth + 2 * marginValue)) / 2;\n        scrollOffset = scrollOffset >= 0 ? scrollOffset : 0;\n      }\n      outputRangeScroll.push(scrollOffset);\n    }\n    if (scrollWidth <= tabContainerWidth) {\n      this.scrollOffsetsCollection = this.props.scrollValue.interpolate({\n        inputRange: [-1, 0], // $FlowFixMe\n        outputRange: [-40, 0], // $FlowFixMe\n        extrapolate: 'clamp', // $FlowFixMe\n      });\n      return;\n    }\n    // $FlowFixMe\n    this.scrollOffsetsCollection = this.props.scrollValue.interpolate({\n      inputRange: [-1, ...inputRange], // $FlowFixMe\n      outputRange: [-40, ...outputRangeScroll], // $FlowFixMe\n    });\n  };\n\n  onTabBarScrolling = (e: Object) => {\n    this.currentContentOffset = e.nativeEvent.contentOffset;\n  };\n\n  renderUnderline() {\n    const tabUnderlineStyle = {\n      position: 'absolute',\n      backgroundColor: this.props.underlineColor,\n      height: this.props.underlineHeight,\n      width: 1,\n      bottom: this.props.underlineBottomPosition,\n      padding: 0,\n    };\n\n    return <Animated.View ref={this.setUnderlineRef} style={[tabUnderlineStyle]} />;\n  }\n\n  renderTab = (\n    tab: TabType,\n    page: number,\n    isTabActive: boolean,\n    onPressHandler: Function,\n    onTabLayout: Function,\n  ) => {\n    const { tabBadgeColor, activeTabTextStyle } = this.props;\n    const { label, badge, badgeColor } = tab;\n    const activeTextColor = this.props.activeTextColor || 'navy';\n    const inactiveTextColor = this.props.inactiveTextColor || 'black';\n    const textStyle = this.props.tabBarTextStyle;\n    return (\n      <TouchableOpacity\n        style={[\n          styles.tab,\n          this.props.tabMargin && { marginLeft: this.props.tabMargin },\n          this.props.tabStyles.tab,\n        ]}\n        key={page}\n        onPress={onPressHandler}\n        onLayout={onTabLayout}\n      >\n        <Text\n          style={[\n            { color: isTabActive ? activeTextColor : inactiveTextColor },\n            textStyle,\n            isTabActive && activeTabTextStyle,\n          ]}\n        >\n          {label}\n        </Text>\n        {badge != null &&\n        (parseInt(badge, 10) > 0) && (\n          <View\n            style={[\n              styles.badgeBubble,\n              this.props.tabStyles.badgeBubble,\n              { backgroundColor: badgeColor || tabBadgeColor || activeTextColor },\n            ]}\n          >\n            <Text style={[styles.badgeText, this.props.tabStyles.badgeText]}>{badge}</Text>\n          </View>\n        )}\n      </TouchableOpacity>\n    );\n  };\n\n  render() {\n    const {\n      style,\n      backgroundColor,\n      tabBarStyle,\n      tabMargin,\n      scrollContainerStyle,\n      tabs,\n    } = this.props;\n    return (\n      <View\n        style={[styles.tabs, { backgroundColor }, style, tabBarStyle]}\n        onLayout={this.measureTabsContainer}\n      >\n        <ScrollView\n          horizontal\n          contentContainerStyle={[\n            styles.scrollContainer,\n            tabMargin && { paddingRight: tabMargin },\n            scrollContainerStyle,\n          ]}\n          showsHorizontalScrollIndicator={false}\n          onContentSizeChange={this.onScrollContentSizeChange}\n          ref={node => (this.scrollView = node)}\n          bounces={false}\n          scrollEventThrottle={1}\n          onScroll={this.onTabBarScrolling}\n        >\n          {tabs.map((tab: TabType, page: number) => {\n            const renderTab = this.props.renderTab || this.renderTab;\n            const isTabActive = this.props.activeTab === page;\n            const onPressHandler = () => this.props.goToPage(page);\n            const onTabLayout = (event: Object) => this.onTabLayout(event, page);\n            return renderTab(tab, page, isTabActive, onPressHandler, onTabLayout);\n          })}\n          {this.state.renderUnderline && this.renderUnderline()}\n        </ScrollView>\n      </View>\n    );\n  }\n}\n\nexport default TabBar;\n"]},"metadata":{},"sourceType":"script"}